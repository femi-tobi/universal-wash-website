<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Universal Wash</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            background: #e8f0fe;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Decorative background blobs */
        body::before,
        body::after {
            content: '';
            position: fixed;
            border-radius: 50%;
            opacity: 0.18;
            pointer-events: none;
        }

        body::before {
            width: 500px;
            height: 500px;
            background: #4285f4;
            top: -150px;
            right: -100px;
        }

        body::after {
            width: 400px;
            height: 400px;
            background: #1a73e8;
            bottom: -120px;
            left: -80px;
        }

        /* ── Main card ── */
        .login-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 24px 60px rgba(66, 133, 244, 0.18);
            width: 100%;
            max-width: 860px;
            min-height: 500px;
            display: flex;
            overflow: hidden;
            position: relative;
            z-index: 1;
        }

        /* ── Left: Form panel ── */
        .form-panel {
            flex: 0 0 340px;
            padding: 48px 44px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            z-index: 2;
            background: white;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 32px;
        }

        .brand img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .brand-text {
            font-size: 15px;
            font-weight: 700;
            color: #1a73e8;
            line-height: 1.2;
        }

        .brand-text span {
            display: block;
            font-size: 11px;
            font-weight: 400;
            color: #888;
        }

        .form-panel h1 {
            font-size: 28px;
            font-weight: 800;
            color: #1a237e;
            margin-bottom: 6px;
        }

        .form-panel .subtitle {
            font-size: 13px;
            color: #888;
            margin-bottom: 32px;
        }

        /* Alert */
        #alert {
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 13px;
            margin-bottom: 16px;
            display: none;
        }

        #alert.alert-error {
            background: #fdecea;
            color: #c62828;
            border: 1px solid #ef9a9a;
            display: block;
        }

        #alert.alert-success {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #a5d6a7;
            display: block;
        }

        #alert.hidden {
            display: none !important;
        }

        /* Input fields */
        .field {
            position: relative;
            margin-bottom: 16px;
        }

        .field svg {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
            pointer-events: none;
        }

        .field input {
            width: 100%;
            padding: 13px 14px 13px 42px;
            border: 1.5px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            color: #333;
            background: #fafafa;
            transition: border-color 0.2s, box-shadow 0.2s;
            outline: none;
        }

        .field input:focus {
            border-color: #4285f4;
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.12);
            background: white;
        }

        .field input::placeholder {
            color: #bbb;
        }

        /* Show/hide password */
        .toggle-pw {
            position: absolute;
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #aaa;
            padding: 0;
            display: flex;
        }

        .btn-login {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #4285f4, #1a73e8);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 700;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            margin-top: 8px;
            transition: opacity 0.2s, transform 0.1s;
            letter-spacing: 0.3px;
        }

        .btn-login:hover {
            opacity: 0.92;
            transform: translateY(-1px);
        }

        .btn-login:active {
            transform: translateY(0);
        }

        .footer-note {
            text-align: center;
            font-size: 11px;
            color: #bbb;
            margin-top: 24px;
        }

        /* ── Right: Illustration panel ── */
        .illus-panel {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: white;
        }

        /* Blue wave shape that bleeds from left */
        .wave-bg {
            position: absolute;
            inset: 0;
        }

        /* ── Responsive ── */
        @media (max-width: 640px) {
            .illus-panel {
                display: none;
            }

            .form-panel {
                flex: 1;
                padding: 40px 28px;
            }

            .login-card {
                max-width: 420px;
            }
        }
    </style>
</head>

<body>

    <div class="login-card">

        <!-- LEFT: Form -->
        <div class="form-panel">
            <div class="brand">
                <img src="/logo2.jpeg" alt="Logo" onerror="this.style.display='none'">
                <div class="brand-text">
                    Universal Wash
                    <span>Laundry Management</span>
                </div>
            </div>

            <h1>Login</h1>
            <p class="subtitle">Welcome back! Sign in to your account.</p>

            <div id="alert" class="hidden"></div>

            <form id="loginForm" autocomplete="off">
                <div class="field">
                    <!-- User icon -->
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                        <circle cx="12" cy="7" r="4" />
                    </svg>
                    <input type="text" id="username" name="username" placeholder="Username" required autofocus>
                </div>

                <div class="field">
                    <!-- Lock icon -->
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                        <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                    </svg>
                    <input type="password" id="password" name="password" placeholder="Password" required>
                    <button type="button" class="toggle-pw" onclick="togglePw()" title="Show/hide password">
                        <svg id="eyeIcon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                            <circle cx="12" cy="12" r="3" />
                        </svg>
                    </button>
                </div>

                <button type="submit" class="btn-login" id="loginBtn">Sign In</button>
            </form>

            <p class="footer-note">Universal Wash &copy; 2026 &mdash; Counter Management System</p>
        </div>

        <!-- RIGHT: Illustration -->
        <div class="illus-panel">
            <svg class="wave-bg" viewBox="0 0 520 500" preserveAspectRatio="xMidYMid slice"
                xmlns="http://www.w3.org/2000/svg">
                <!-- Wave background -->
                <path d="M0,0 L520,0 L520,500 L0,500 Z" fill="#f0f4ff" />
                <path d="M-20,80 Q80,20 160,120 Q240,220 160,320 Q80,420 -20,380 Z" fill="#dce8ff" opacity="0.6" />
                <path d="M60,0 Q180,60 140,200 Q100,340 200,420 Q280,480 520,460 L520,0 Z" fill="#4285f4"
                    opacity="0.12" />

                <!-- Washing machine body -->
                <rect x="180" y="220" width="160" height="170" rx="12" fill="#4285f4" />
                <rect x="190" y="230" width="140" height="150" rx="8" fill="#3578e5" />
                <!-- Machine door -->
                <circle cx="260" cy="305" r="52" fill="#1a56c4" />
                <circle cx="260" cy="305" r="44" fill="#2563eb" opacity="0.5" />
                <circle cx="260" cy="305" r="36" fill="#1e40af" opacity="0.4" />
                <!-- Drum lines -->
                <line x1="228" y1="285" x2="292" y2="325" stroke="white" stroke-width="2" opacity="0.3" />
                <line x1="228" y1="325" x2="292" y2="285" stroke="white" stroke-width="2" opacity="0.3" />
                <!-- Control panel -->
                <rect x="195" y="235" width="130" height="30" rx="4" fill="#1d4ed8" opacity="0.5" />
                <circle cx="215" cy="250" r="6" fill="#60a5fa" />
                <circle cx="235" cy="250" r="6" fill="#93c5fd" opacity="0.6" />
                <rect x="250" y="244" width="60" height="12" rx="3" fill="#1e3a8a" opacity="0.6" />
                <!-- Machine legs -->
                <rect x="200" y="388" width="20" height="12" rx="3" fill="#1d4ed8" />
                <rect x="300" y="388" width="20" height="12" rx="3" fill="#1d4ed8" />

                <!-- Counter / desk -->
                <rect x="100" y="380" width="340" height="18" rx="6" fill="#bfdbfe" />
                <rect x="110" y="395" width="320" height="80" rx="4" fill="#dbeafe" />

                <!-- Laundry basket left -->
                <ellipse cx="140" cy="375" rx="35" ry="12" fill="#93c5fd" />
                <rect x="108" y="340" width="64" height="38" rx="8" fill="#bfdbfe" />
                <line x1="115" y1="345" x2="115" y2="375" stroke="#93c5fd" stroke-width="2" />
                <line x1="128" y1="345" x2="128" y2="375" stroke="#93c5fd" stroke-width="2" />
                <line x1="141" y1="345" x2="141" y2="375" stroke="#93c5fd" stroke-width="2" />
                <line x1="154" y1="345" x2="154" y2="375" stroke="#93c5fd" stroke-width="2" />
                <line x1="167" y1="345" x2="167" y2="375" stroke="#93c5fd" stroke-width="2" />
                <!-- Clothes in basket -->
                <ellipse cx="140" cy="342" rx="30" ry="10" fill="#60a5fa" opacity="0.7" />
                <path d="M115,342 Q130,330 155,342" fill="#3b82f6" opacity="0.5" />

                <!-- Folded clothes stack right -->
                <rect x="370" y="340" width="60" height="14" rx="4" fill="#93c5fd" />
                <rect x="373" y="326" width="54" height="14" rx="4" fill="#60a5fa" />
                <rect x="376" y="312" width="48" height="14" rx="4" fill="#3b82f6" />
                <rect x="379" y="298" width="42" height="14" rx="4" fill="#2563eb" />

                <!-- Staff person (right side of counter) -->
                <!-- Body -->
                <rect x="300" y="270" width="50" height="80" rx="10" fill="#60a5fa" />
                <!-- Head -->
                <circle cx="325" cy="255" r="22" fill="#fde68a" />
                <!-- Hair -->
                <path d="M303,248 Q310,225 325,233 Q340,225 347,248 Q345,235 325,230 Q305,235 303,248 Z"
                    fill="#1e3a8a" />
                <path d="M303,248 Q298,265 303,275 Q300,260 303,248 Z" fill="#1e3a8a" />
                <path d="M347,248 Q352,265 347,275 Q350,260 347,248 Z" fill="#1e3a8a" />
                <!-- Face -->
                <circle cx="319" cy="256" r="2.5" fill="#92400e" />
                <circle cx="331" cy="256" r="2.5" fill="#92400e" />
                <path d="M319,265 Q325,270 331,265" stroke="#92400e" stroke-width="1.5" fill="none"
                    stroke-linecap="round" />
                <!-- Arms -->
                <rect x="258" y="280" width="42" height="14" rx="7" fill="#60a5fa" transform="rotate(-20 280 287)" />
                <rect x="350" y="278" width="38" height="14" rx="7" fill="#60a5fa" transform="rotate(15 369 285)" />
                <!-- Clipboard in hand -->
                <rect x="258" y="268" width="28" height="36" rx="4" fill="#1e3a8a" />
                <rect x="262" y="272" width="20" height="28" rx="2" fill="white" opacity="0.9" />
                <line x1="265" y1="278" x2="279" y2="278" stroke="#93c5fd" stroke-width="1.5" />
                <line x1="265" y1="284" x2="279" y2="284" stroke="#93c5fd" stroke-width="1.5" />
                <line x1="265" y1="290" x2="274" y2="290" stroke="#93c5fd" stroke-width="1.5" />

                <!-- Customer person (left of counter) -->
                <!-- Body -->
                <rect x="130" y="275" width="46" height="75" rx="10" fill="#a5b4fc" />
                <!-- Head -->
                <circle cx="153" cy="258" r="20" fill="#fde68a" />
                <!-- Hair -->
                <path d="M133,254 Q138,238 153,242 Q168,238 173,254 Q170,242 153,238 Q136,242 133,254 Z"
                    fill="#78350f" />
                <!-- Face -->
                <circle cx="147" cy="259" r="2" fill="#92400e" />
                <circle cx="159" cy="259" r="2" fill="#92400e" />
                <path d="M147,267 Q153,272 159,267" stroke="#92400e" stroke-width="1.5" fill="none"
                    stroke-linecap="round" />
                <!-- Arms raised -->
                <rect x="176" y="278" width="36" height="13" rx="6" fill="#a5b4fc" transform="rotate(-25 194 284)" />
                <rect x="96" y="282" width="34" height="13" rx="6" fill="#a5b4fc" transform="rotate(20 113 288)" />
                <!-- Clothes bundle in hands -->
                <ellipse cx="192" cy="268" rx="16" ry="10" fill="#bfdbfe" transform="rotate(-25 192 268)" />

                <!-- Bubbles / steam -->
                <circle cx="230" cy="195" r="8" fill="#93c5fd" opacity="0.4" />
                <circle cx="250" cy="178" r="5" fill="#60a5fa" opacity="0.3" />
                <circle cx="268" cy="190" r="6" fill="#93c5fd" opacity="0.35" />
                <circle cx="290" cy="175" r="4" fill="#60a5fa" opacity="0.25" />

                <!-- Shelves in background -->
                <rect x="360" y="150" width="130" height="8" rx="3" fill="#bfdbfe" opacity="0.7" />
                <rect x="360" y="190" width="130" height="8" rx="3" fill="#bfdbfe" opacity="0.7" />
                <rect x="360" y="230" width="130" height="8" rx="3" fill="#bfdbfe" opacity="0.7" />
                <!-- Items on shelves -->
                <rect x="368" y="130" width="18" height="20" rx="3" fill="#93c5fd" opacity="0.8" />
                <rect x="392" y="133" width="14" height="17" rx="3" fill="#60a5fa" opacity="0.7" />
                <rect x="412" y="128" width="22" height="22" rx="3" fill="#3b82f6" opacity="0.6" />
                <rect x="368" y="170" width="16" height="20" rx="3" fill="#60a5fa" opacity="0.7" />
                <rect x="390" y="172" width="20" height="18" rx="3" fill="#93c5fd" opacity="0.8" />
                <rect x="416" y="168" width="14" height="22" rx="3" fill="#3b82f6" opacity="0.6" />

                <!-- Hanging clothes line -->
                <line x1="100" y1="160" x2="180" y2="160" stroke="#93c5fd" stroke-width="1.5" opacity="0.6" />
                <rect x="108" y="155" width="14" height="22" rx="3" fill="#bfdbfe" opacity="0.8" />
                <rect x="128" y="153" width="12" height="24" rx="3" fill="#93c5fd" opacity="0.7" />
                <rect x="148" y="156" width="16" height="20" rx="3" fill="#60a5fa" opacity="0.6" />
                <!-- Hangers -->
                <path d="M115,155 Q115,148 120,148 Q125,148 125,155" stroke="#60a5fa" stroke-width="1.5" fill="none" />
                <path d="M134,153 Q134,146 139,146 Q144,146 144,153" stroke="#60a5fa" stroke-width="1.5" fill="none" />
                <path d="M156,156 Q156,149 161,149 Q166,149 166,156" stroke="#60a5fa" stroke-width="1.5" fill="none" />

                <!-- Text label -->
                <text x="260" y="470" text-anchor="middle" font-family="Inter, Arial" font-size="13" font-weight="600"
                    fill="#4285f4" opacity="0.7">Universal Wash — Laundry Management</text>
            </svg>
        </div>

    </div>

    <script>
        function togglePw() {
            const pw = document.getElementById('password');
            const icon = document.getElementById('eyeIcon');
            if (pw.type === 'password') {
                pw.type = 'text';
                icon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/>';
            } else {
                pw.type = 'password';
                icon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>';
            }
        }

        // Alert helper
        function showAlert(message, type) {
            const el = document.getElementById('alert');
            el.className = 'alert-' + type;
            el.textContent = message;
            el.classList.remove('hidden');
            setTimeout(() => el.classList.add('hidden'), 5000);
        }

        // Login form
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('loginBtn');
            btn.textContent = 'Signing in…';
            btn.disabled = true;

            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;

            try {
                const res = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                });
                const data = await res.json();

                if (res.ok) {
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    window.location.href = data.user.role === 'admin'
                        ? '/views/admin/dashboard.html'
                        : '/views/staff/dashboard.html';
                } else {
                    showAlert(data.error || 'Invalid credentials', 'error');
                    btn.textContent = 'Sign In';
                    btn.disabled = false;
                }
            } catch (err) {
                showAlert('Connection error. Please try again.', 'error');
                btn.textContent = 'Sign In';
                btn.disabled = false;
            }
        });
    </script>

</body>

</html>